package subscription

import (
	"github.com/ethereum/go-ethereum/accounts/abi"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/common/hexutil"
	"math/big"
	"strings"
)

func GetContractBin() []byte {
	return hexutil.MustDecode("0x6080604052600436106100dd5760003560e01c80638f32d59b1161007f578063b8cb327211610059578063b8cb327214610299578063e04402ec146102b9578063f2fde38b146102ce578063fe48eef0146102ee57600080fd5b80638f32d59b14610219578063a655c75b14610258578063b47279061461026b57600080fd5b80636e307981116100bb5780636e3079811461018b578063715018a614610193578063790554de146101a85780638da5cb5b146101c857600080fd5b806326cd5274146100e2578063372aa22414610149578063485cc9551461016b575b600080fd5b3480156100ee57600080fd5b506101246100fd3660046114d0565b60336020526000908152604090208054600182015460028301546003909301549192909184565b6040805194855260208501939093529183015260608201526080015b60405180910390f35b34801561015557600080fd5b50610169610164366004611512565b610330565b005b34801561017757600080fd5b5061016961018636600461152d565b6103e9565b6101696105a4565b34801561019f57600080fd5b50610169610676565b3480156101b457600080fd5b506101696101c3366004611560565b610757565b3480156101d457600080fd5b5060005462010000900473ffffffffffffffffffffffffffffffffffffffff1660405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610140565b34801561022557600080fd5b5060005462010000900473ffffffffffffffffffffffffffffffffffffffff1633145b6040519015158152602001610140565b6101696102663660046114d0565b6109cc565b34801561027757600080fd5b5061028b610286366004611592565b610b82565b604051908152602001610140565b3480156102a557600080fd5b506101696102b4366004611560565b610d2f565b3480156102c557600080fd5b50610248610fa9565b3480156102da57600080fd5b506101696102e9366004611512565b61103d565b3480156102fa57600080fd5b50610124610309366004611512565b60346020526000908152604090208054600182015460028301546003909301549192909184565b60005462010000900473ffffffffffffffffffffffffffffffffffffffff1633146103a25760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b603580547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff92909216919091179055565b600054610100900460ff16158080156104095750600054600160ff909116105b806104235750303b158015610423575060005460ff166001145b6104955760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201527f647920696e697469616c697a65640000000000000000000000000000000000006064820152608401610399565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016600117905580156104f357600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff166101001790555b6104fc826110b6565b603680547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff8516179055801561059f57600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b505050565b336000908152603460205260409020546106005760405162461bcd60e51b815260206004820152601560248201527f6e6f20737562736372697074696f6e20666f756e6400000000000000000000006044820152606401610399565b336000908152603460205260409020805461061a906111b1565b8054600090815260336020526040902060020154600182015461063c91611383565b6001808301919091558154600090815260336020526040902001546106649062015180611396565b61066e90426115eb565b600390910155565b60005462010000900473ffffffffffffffffffffffffffffffffffffffff1633146106e35760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610399565b600080546040516201000090910473ffffffffffffffffffffffffffffffffffffffff16907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600080547fffffffffffffffffffff0000000000000000000000000000000000000000ffff169055565b60005462010000900473ffffffffffffffffffffffffffffffffffffffff1633146107c45760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610399565b600084116108145760405162461bcd60e51b815260206004820152600e60248201527f696e76616c696420706c616e49640000000000000000000000000000000000006044820152606401610399565b6000848152603360205260409020546108955760405162461bcd60e51b815260206004820152602a60248201527f6120706c616e2077697468207468652070726f766964656420696420646f657360448201527f206e6f74206578697374000000000000000000000000000000000000000000006064820152608401610399565b6000831161090a5760405162461bcd60e51b8152602060048201526024808201527f6120706c616e206d75737420686176652061206e6f6e2d7a65726f206475726160448201527f74696f6e000000000000000000000000000000000000000000000000000000006064820152608401610399565b6000821161095a5760405162461bcd60e51b815260206004820152601f60248201527f6120706c616e206d7573742068617665206e6f6e2d7a65726f20756e697473006044820152606401610399565b600081116109aa5760405162461bcd60e51b815260206004820152601f60248201527f6120706c616e206d7573742068617665206e6f6e2d7a65726f207072696365006044820152606401610399565b6000938452603360205260409093206001810192909255600282015560030155565b60008111610a1c5760405162461bcd60e51b815260206004820152600e60248201527f696e76616c696420706c616e49640000000000000000000000000000000000006044820152606401610399565b600081815260336020526040902054610a9d5760405162461bcd60e51b815260206004820152602560248201527f63616e6e6f742073756273637269626520746f206e6f6e2d6578697374656e7460448201527f20706c616e0000000000000000000000000000000000000000000000000000006064820152608401610399565b3360009081526034602052604090205415610b205760405162461bcd60e51b815260206004820152602160248201527f73656e64657220616c726561647920686173206120737562736372697074696f60448201527f6e000000000000000000000000000000000000000000000000000000000000006064820152608401610399565b610b29816111b1565b336000908152603460209081526040808320848155848452603390925290912060028082015460018085019190915542918401919091550154610b6f9062015180611396565b610b7990426115eb565b60039091015550565b60365460009073ffffffffffffffffffffffffffffffffffffffff163314610c125760405162461bcd60e51b815260206004820152602960248201527f63616c6c6572206973206e6f7420746865204e6f64654472697665724175746860448201527f20636f6e747261637400000000000000000000000000000000000000000000006064820152608401610399565b33600090815260346020526040902060030154421115610c745760405162461bcd60e51b815260206004820152601460248201527f737562736372697074696f6e20657870697265640000000000000000000000006044820152606401610399565b60008211610cc45760405162461bcd60e51b815260206004820152601460248201527f6e6565647320706f73697469766520756e6974730000000000000000000000006044820152606401610399565b73ffffffffffffffffffffffffffffffffffffffff83166000908152603460205260409020600181015480841115610d105760006001830155610d0784826113a2565b92505050610d29565b610d1a81856113a2565b82600101819055506000925050505b92915050565b60005462010000900473ffffffffffffffffffffffffffffffffffffffff163314610d9c5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610399565b60008411610dec5760405162461bcd60e51b815260206004820152600e60248201527f696e76616c696420706c616e49640000000000000000000000000000000000006044820152606401610399565b60008481526033602052604090205415610e6e5760405162461bcd60e51b815260206004820152602a60248201527f6120706c616e2077697468207468652070726f766964656420696420616c726560448201527f61647920657869737473000000000000000000000000000000000000000000006064820152608401610399565b60008311610ee35760405162461bcd60e51b8152602060048201526024808201527f6120706c616e206d75737420686176652061206e6f6e2d7a65726f206475726160448201527f74696f6e000000000000000000000000000000000000000000000000000000006064820152608401610399565b60008211610f335760405162461bcd60e51b815260206004820152601f60248201527f6120706c616e206d7573742068617665206e6f6e2d7a65726f20756e697473006044820152606401610399565b60008111610f835760405162461bcd60e51b815260206004820152601f60248201527f6120706c616e206d7573742068617665206e6f6e2d7a65726f207072696365006044820152606401610399565b600084815260336020526040902093845560018401929092556002830155600390910155565b336000908152603460205260408120546110055760405162461bcd60e51b815260206004820152601560248201527f6e6f20737562736372697074696f6e20666f756e6400000000000000000000006044820152606401610399565b33600090815260346020526040902060030154421180159061103857503360009081526034602052604090206001015415155b905090565b60005462010000900473ffffffffffffffffffffffffffffffffffffffff1633146110aa5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610399565b6110b3816113ae565b50565b600054610100900460ff166111335760405162461bcd60e51b815260206004820152602b60248201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960448201527f6e697469616c697a696e670000000000000000000000000000000000000000006064820152608401610399565b600080547fffffffffffffffffffff0000000000000000000000000000000000000000ffff166201000073ffffffffffffffffffffffffffffffffffffffff84811682029290921780845560405191900490911691907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a350565b6035546000828152603360205260408082206003015490517fc94b990b000000000000000000000000000000000000000000000000000000008152919273ffffffffffffffffffffffffffffffffffffffff169163c94b990b9161121b9160040190815260200190565b6020604051808303816000875af115801561123a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125e91906115fe565b9050803410156112d65760405162461bcd60e51b815260206004820152602c60248201527f726563656976656420696e73756666696369656e742066756e647320666f722060448201527f737562736372697074696f6e00000000000000000000000000000000000000006064820152608401610399565b60006112e234836113a2565b604051909150600090339083908381818185875af1925050503d8060008114611327576040519150601f19603f3d011682016040523d82523d6000602084013e61132c565b606091505b505090508061137d5760405162461bcd60e51b815260206004820152601860248201527f636f756c64206e6f7420706572666f726d20726566756e6400000000000000006044820152606401610399565b50505050565b600061138f82846115eb565b9392505050565b600061138f8284611617565b600061138f828461162e565b73ffffffffffffffffffffffffffffffffffffffff81166114375760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f64647265737300000000000000000000000000000000000000000000000000006064820152608401610399565b6000805460405173ffffffffffffffffffffffffffffffffffffffff808516936201000090930416917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff90921662010000027fffffffffffffffffffff0000000000000000000000000000000000000000ffff909216919091179055565b6000602082840312156114e257600080fd5b5035919050565b803573ffffffffffffffffffffffffffffffffffffffff8116811461150d57600080fd5b919050565b60006020828403121561152457600080fd5b61138f826114e9565b6000806040838503121561154057600080fd5b611549836114e9565b9150611557602084016114e9565b90509250929050565b6000806000806080858703121561157657600080fd5b5050823594602084013594506040840135936060013592509050565b600080604083850312156115a557600080fd5b6115ae836114e9565b946020939093013593505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b80820180821115610d2957610d296115bc565b60006020828403121561161057600080fd5b5051919050565b8082028115828204841417610d2957610d296115bc565b81810381811115610d2957610d296115bc56fea26469706673582212201ece50dcacfae6c5c28704a1f0d590b580486e3590118edf45aa9c84d1edf36964736f6c63430008110033")
}

var ContractAddress = common.HexToAddress("0xfc00face00000000000000000000000000000003")

const ContractABI = "[{\"constant\":false,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"sealedEpoch\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalSupply\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_staking\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_auth\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_driver\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_evmWriter\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_validatorInfo\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"initializeAll\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"

var (
	sAbi, _ = abi.JSON(strings.NewReader(ContractABI))
)

func ReduceBalance(subscriber common.Address, amount *big.Int) []byte {
	data, _ := sAbi.Pack("reduceBalance", subscriber, amount)
	return data
}
